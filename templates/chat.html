<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Chat - Ctrl+Alt+ReVendre</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <header class="header">
        <div class="logo-container">
            <img src="{{ url_for('static', filename='logo.png') }}" class="logo" alt="Ctrl+Alt+ReVendre">
        </div>
        <div style="padding-right:20px;">
            <a href="{{ url_for('logout') }}" class="login-btn">Se déconnecter</a>
        </div>
    </header>

    <main class="content">
        <h2 style="padding-top:20px;">Bienvenue {{ user }} !</h2>
        <div class="chat-box">
            {% with messages = get_flashed_messages(with_categories=true) %}
              {% if messages %}
                {% for category, message in messages %}
                  <div class="flash {{ category }}">{{ message }}</div>
                {% endfor %}
              {% endif %}
            {% endwith %}
            <div style="max-height:400px; overflow-y:auto; margin-bottom:15px;">
                {% for msg in messages %}
                    <div class="message {% if msg.from == user %}from-user{% else %}from-admin{% endif %}">
                        <strong>{{ msg.from }}:</strong> {{ msg.message }} <small>{{ msg.time }}</small>
                    </div>
                {% endfor %}
            </div>
            <form method="POST">
                <input type="text" name="message" placeholder="Écrire un message..." required>
                <button type="submit">Envoyer</button>
            </form>
        </div>
    </main>
</body>
</html>
